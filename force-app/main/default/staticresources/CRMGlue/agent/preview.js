define(["util","config"],function(a,b){var c="agent/preview: ";return{onMessage:function(b){console.log(c+b.messageType);try{"OutboundRecordMessage"===b.messageType&&"StatusChanged"===b.notificationType&&(console.log(c+"id - "+b.record.id),console.log(c+"state - "+b.record.state),console.log(c+"phone - "+b.record.phone),b.record.mediaType="preview","ReadyToCall"===b.record.state&&(console.log(c+"publish preview.pop"),a.getInstance("preview.pop").publish(b)))}catch(a){console.error(c+"ERROR - "+a.stack)}}}});