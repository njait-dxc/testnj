define(["util","moment","config"],function(a,b,c){var d="agent/openmedia: ";return{onMessage:function(b){console.log(d+b.messageType);try{if("OpenMediaStateChangeMessage"===b.messageType&&"StatusChange"===b.notificationType)switch(console.log(d+"id - "+b.openmedia.id),console.log(d+"state - "+b.openmedia.state),b.openmedia.state){case"Chatting":console.log(d+"publish openmedia.pop"),a.getInstance("openmedia.pop").publish(b);break;case"Completed":console.log(d+"publish openmedia.ended"),a.getInstance("openmedia.ended").publish(b)}}catch(a){console.error(d+"ERROR - "+a.stack)}}}});