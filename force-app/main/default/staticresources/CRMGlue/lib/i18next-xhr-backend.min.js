!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define("i18nextXHRBackend",b):a.i18nextXHRBackend=b()}(this,function(){"use strict";function a(a){return f.call(g.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a}function b(a,b,c,e,f){if(e&&"object"===(void 0===e?"undefined":d.typeof(e))){var g="",h=encodeURIComponent;for(var i in e)g+="&"+h(i)+"="+h(e[i]);e=g.slice(1)+(f?"":"&_t="+new Date)}try{var j=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");j.open(e?"POST":"GET",a,1),b.crossDomain||j.setRequestHeader("X-Requested-With","XMLHttpRequest"),j.setRequestHeader("Content-type","application/x-www-form-urlencoded"),j.onreadystatechange=function(){j.readyState>3&&c&&c(j.responseText,j)},j.send(e)}catch(h){window.console&&console.log(h)}}function c(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:b}}var d={};d.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},d.classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},d.createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();var e=[],f=e.forEach,g=e.slice,h=function(){function b(a){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];d.classCallCheck(this,b),this.init(a,c),this.type="backend"}return d.createClass(b,[{key:"init",value:function(b){var d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.services=b,this.options=a(d,this.options||{},c())}},{key:"readMulti",value:function(a,b,c){var d=this.services.interpolator.interpolate(this.options.loadPath,{lng:a.join("+"),ns:b.join("+")});this.loadUrl(d,c)}},{key:"read",value:function(a,b,c){var d=this.services.interpolator.interpolate(this.options.loadPath,{lng:a,ns:b});this.loadUrl(d,c)}},{key:"loadUrl",value:function(a,b){var c=this;this.options.ajax(a,this.options,function(d,e){var f=e.status.toString();if(0===f.indexOf("5"))return b("failed loading "+a,!0);if(0===f.indexOf("4"))return b("failed loading "+a,!1);var g=void 0,h=void 0;try{g=c.options.parse(d)}catch(b){h="failed parsing "+a+" to json"}return h?b(h,!1):void b(null,g)})}},{key:"create",value:function(a,b,c,d){var e=this;"string"==typeof a&&(a=[a]);var f={};f[c]=d||"",a.forEach(function(a){var c=e.services.interpolator.interpolate(e.options.addPath,{lng:a,ns:b});e.options.ajax(c,e.options,function(a,b){},f)})}}]),b}();return h.type="backend",h});